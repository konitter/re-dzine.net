<!DOCTYPE html><html lang="ja" prefix="og: http://ogp.me/ns# fb: http://www.facebook.com/2008/fbml"><head><meta charset="utf-8" /><title>Windowsで社内LANからプロキシを超えてGitHubにSSH接続する方法 | REFLECTDESIGN</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="Windowsで社内LANからプロキシを超えてGitHubにSSH接続する方法 | REFLECTDESIGN" property="og:title" /><meta content="REFLECTDESIGN" property="og:site_name" /><meta content="仕事でGitHubを使うことはなくても、エンジニア(?)たるものそういうサービスを使ってゴニョゴニョしてモテたいわけです(仕事しろよ)。で、環境を整えてGitHubへアクセスしてみるのですが、どうにもこうにもプロキシが超えられず、断念するということをこれまでに何度も繰り返してきました。この度、とあるブログエントリーを見つけたのをきっかけに色々やってみたところ、無事GitHubへの接 [...]" property="og:description" /><meta content="article" property="og:type" /><meta content="http://re-dzine.net/2012/08/over-proxy-github/" property="og:url" /><meta content="http://re-dzine.net/img/ogp.png" property="og:image" /><meta content="100000698495270" property="fb:admins" /><meta content="231858050163702" property="fb:app_id" /><meta content="https://www.facebook.com/konitter" property="article:publisher" /><link href="/css/style.css" rel="stylesheet" /><link href="/feed.xml" rel="alternate" title="REFLECTDESIGN" type="application/rss+xml" /><link href="https://plus.google.com/100193534781993105417/posts" rel="author" /><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" /></head><body><header id="header"><a href="/" id="logo"><img alt="REFLECTDESIGN" src="/img/r.png" /></a></header><main role="main"><article><header><h1>Windowsで社内LANからプロキシを超えてGitHubにSSH接続する方法</h1><div class="meta"><time datetime="2012-08-16T00:00:00+09:00">2012-08-16</time> - by <a href="(?-mix:about)">konitter</a></div></header><div class="entry"><p>仕事でGitHubを使うことはなくても、エンジニア(?)たるものそういうサービスを使ってゴニョゴニョしてモテたいわけです(仕事しろよ)。で、環境を整えてGitHubへアクセスしてみるのですが、どうにもこうにもプロキシが超えられず、断念するということをこれまでに何度も繰り返してきました。</p>

<p>この度、とあるブログエントリーを見つけたのをきっかけに色々やってみたところ、無事GitHubへの接続に成功しましたので、メモとして残しておきます。</p>

<!--more-->

<p>上記で見つけたブログエントリーというのはこれです。(本当に感謝です！</p>

<ul>
<li><a href="http://mattn.kaoriya.net/software/20081029172540.htm">Big Sky :: SSHポートが通らなくてもgithub.comにpushする方法</a></li>
</ul>

<p>まずはこのエントリーの通り、msysGitをインストールして、SSHキーを生成し、そのキーをGitHubに登録しておきます。</p>

<p>SSHキーが登録できたらGitHubに接続する前に~/.ssh/にあるconfigファイルを編集（なければ作成）します。設定内容については上記エントリーから以下に引用します。</p>

<blockquote>
github.comへのSSH接続にはホスト名"ssh.github.com"、ポート"443"に接続する様に設定します。
※このssh.github.comが味噌です。
~/.ssh/config
<pre>
<code class="language-sh">Host github.com
    User git
    Hostname ssh.github.com
    Port 443
    IdentityFile c:/docume~1/mattn/.ssh/id_rsa</code>
</pre>
秘密鍵のパスをお間違え無く。
</blockquote>

<p>ポートは&quot;43&quot;しかダメだと思ってましたが、&quot;443&quot;でいけるとのこと。このとおりconfigを編集して、GitHubにアクセスしてみました。が、ダメでした。</p>

<pre>
<code class="language-sh">$ssh -T git@github.com
ssh: connect to host github.com port 22: Bad file number
fatal: The remote end hung up unexpectedly</code>
</pre>

<p>まだプロキシが超えられてません。冷静に考えれば当然ですね。そこでGoogle先生に聞いてみたところ、以下のブログを発見。</p>

<ul>
<li><a href="http://luozengbin.blogspot.jp/2011/07/ssh-over-proxygithubwindows.html">ssh over proxyでgithubをアクセスする（Windows）</a></li>
</ul>

<p>このブログエントリーの通りgit configコマンドでプロキシサーバーの設定を登録します。</p>

<pre>
<code class="language-sh">$git config --global http.proxy http://proxy.server.com:port</code>
</pre>

<p>次に~/.ssh/configを開き、本エントリーの上で記述した設定に以下のプロキシサーバーの設定を追記します。コマンド内のconnect.exeはC:/Program Files/Git/binの配下にあるはず。</p>

<pre>
<code class="language-sh">ProxyCommand connect.exe -H proxy.server.com:port %h %p</code>
</pre>

<p>これでもう一度$ssh -T git@github.comしたところ、無事に接続できました！一応仕事してる体なので無表情なのですが、心のなかでは飛び上がるほど嬉しかったです。</p>

<p>これで色々GitHubを弄りまくってモテたいと思います。みなさま何卒よろしくお願い申し上げます。</p>
</div></article><aside class="share"><ul><li><div class="fb-like" data-send="false" data-layout="button_count" data-width="auto" data-show-faces="false"></div><div id="fb-root"></div><script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=231858050163702";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="konitter" data-lang="en">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script></li></ul></aside><ul class="post-pager"><li>Older Entry:<div><a href="/2012/06/vim-night-watch/">Vimカラースキームを自作してみた- Night Watch</a></div></li><li>Newer Entry:<div><a href="/2012/08/neobundle-vim/">Vimのプラグイン管理をpathogenからneobundleに移行してハマった話</a></div></li></ul></main><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-10906036-1']);
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageLoadTime']);
(function() {
    var ga = document.createElement('script'); ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>